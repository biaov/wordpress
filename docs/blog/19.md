# åŸºäº Vite + Vue3 + TS å¼€å‘ç»„ä»¶åº“

## æŠ€æœ¯æ ˆ

* é™„ä¸Š [Githubåœ°å€](https://github.com/biaov/MINE-H5-UI) å’Œ [æ¼”ç¤ºåœ°å€](https://mineh5ui.biaov.cn/v2/) ä»¥ä¾›å‚è€ƒã€‚

> HTML5 + CSS3 + Less + ES6<sup>+</sup> + Vue3.x + Composition-API + Vite + Gulp + Rollup + Jest

## åˆå§‹åŒ–é¡¹ç›®

* å¯ä»¥ä½¿ç”¨ [vite](https://cn.vitejs.dev/) çš„å®˜æ–¹ templateï¼Œä¹Ÿå¯ä»¥è‡ªå·±æ­å»ºã€‚

### å®˜æ–¹å‘½ä»¤

```Basic
npm init vite@latest ui --template vue
```

### ä»é›¶æ­å»º

#### ç”Ÿæˆ `package.json`

```Basic
npm init -y
```

```JSON
{
  "name": "ui",
  "version": "1.0.0",
  "description": "",
  "main": "index.js",
  "scripts": {
    "test": "echo \"Error: no test specified\" && exit 1"
  },
  "keywords": [],
  "author": "",
  "license": "ISC"
}
```

#### å®‰è£…ä¾èµ–

* dependencies

```Basic
# ç®€åŒ–ç‰ˆæœ¬
npm i -S clipboard mockjs vue vue-router
# or æŒ‡å®šç‰ˆæœ¬
npm i -S clipboard@2.0.8 mockjs@1.1.0 vue@3.0.11 vue-router@4.0.6
```

<details>
<summary>ğŸ‘€ æŸ¥çœ‹è¯´æ˜</summary>

* [clipboard](https://www.npmjs.com/package/clipboard)ï¼š`å¯é€‰` å¤åˆ¶åˆ°å‰ªåˆ‡æ¿
* [mockjs](https://www.npmjs.com/package/mockjs)ï¼š`å¯é€‰` ç”Ÿæˆéšæœºæ•°æ®
* [vue](https://www.npmjs.com/package/vue)ï¼šæ¸è¿›å¼æ¡†æ¶
* [vue-router](https://www.npmjs.com/package/vue-router)ï¼šè·¯ç”±ç®¡ç†å™¨

</details>

* devDependencies

```Basic
# ç®€åŒ–ç‰ˆæœ¬
npm i -D @rollup/plugin-node-resolve @types/jest @types/mockjs @types/node @typescript-eslint/eslint-plugin @typescript-eslint/parser @vitejs/plugin-vue @vue/compiler-sfc @vue/test-utils autoprefixer del eslint eslint-config-airbnb-base eslint-config-prettier eslint-plugin-import eslint-plugin-jest eslint-plugin-prettier eslint-plugin-vue gulp gulp-autoprefixer gulp-cssmin gulp-less gulp-postcss jest less markdown-it-container postcss-pxtorem prettier rollup rollup-plugin-terser rollup-plugin-typescript2 rollup-plugin-vue ts-jest typescript vite vite-plugin-vuedoc vue-jest vue-tsc
# or æŒ‡å®šç‰ˆæœ¬
npm i -D @rollup/plugin-node-resolve@13.0.0 @types/jest@26.0.23 @types/mockjs@1.0.4 @types/node@15.0.2 @typescript-eslint/eslint-plugin@4.25.0 @typescript-eslint/parser@4.25.0 @vitejs/plugin-vue@1.2.2 @vue/compiler-sfc@3.0.5 @vue/test-utils@2.0.0-rc.6 autoprefixer@10.2.6 del@6.0.0 eslint@7.27.0 eslint-config-airbnb-base@14.2.1 eslint-config-prettier@8.3.0 eslint-plugin-import@2.23.4 eslint-plugin-jest@24.3.6 eslint-plugin-prettier@3.4.0 eslint-plugin-vue@7.10.0 gulp@4.0.2 gulp-autoprefixer@7.0.1 gulp-cssmin@0.2.0 gulp-less@4.0.1 gulp-postcss@9.0.0 jest@26.6.3 less@3.13.1 markdown-it-container@3.0.0 postcss-pxtorem@6.0.0 prettier@2.3.0 rollup@2.50.5 rollup-plugin-terser@7.0.2 rollup-plugin-typescript2@0.30.0 rollup-plugin-vue@6.0.0 ts-jest@26.5.6 typescript@4.1.3 vite@2.2.3 vite-plugin-vuedoc@3.1.3 vue-jest@5.0.0-alpha.10 vue-tsc@0.0.24
```

<details>
<summary>ğŸ‘€ æŸ¥çœ‹è¯´æ˜</summary>

* [@rollup/plugin-node-resolve](https://www.npmjs.com/package/@rollup/plugin-node-resolve)ï¼šrollup è·¯å¾„è§£ææ’ä»¶ï¼Œå‘Šè¯‰ Rollup å¦‚ä½•æŸ¥æ‰¾å¤–éƒ¨æ¨¡å—
* [@types/jest](https://www.npmjs.com/package/@types/jest)ï¼šjest çš„ TS æ¨¡å—
* [@types/mockjs](https://www.npmjs.com/package/@types/mockjs)ï¼šmockjs çš„ TS æ¨¡å—
* [@types/node](https://www.npmjs.com/package/@types/node)ï¼šå…³äº nodejs çš„ç±»å‹å®šä¹‰ï¼Œç”¨äº nodejs ä¸­ä½¿ç”¨ TS
* [@typescript-eslint/eslint-plugin](https://www.npmjs.com/package/@typescript-eslint/eslint-plugin)ï¼šeslint æ’ä»¶ï¼ŒåŒ…å«äº†å„ç±»å®šä¹‰å¥½çš„æ£€æµ‹ TS ä»£ç çš„è§„èŒƒ
* [@typescript-eslint/parser](https://www.npmjs.com/package/@typescript-eslint/parser)ï¼šeslint çš„è§£æå™¨ï¼Œç”¨äºè§£æ TSï¼Œä»è€Œæ£€æŸ¥å’Œè§„èŒƒ TS
* [@vitejs/plugin-vue](https://www.npmjs.com/package/@vitejs/plugin-vue)ï¼švite è§£æ Vue çš„æ’ä»¶
* [@vue/compiler-sfc](https://www.npmjs.com/package/@vue/compiler-sfc)ï¼šè§£æ SFC(Single File Components) ç»„ä»¶
* [@vue/test-utils](https://www.npmjs.com/package/@vue/test-utils)ï¼šVue å•å…ƒæµ‹è¯•
* [autoprefixer](https://www.npmjs.com/package/autoprefixer)ï¼šæµè§ˆå™¨å‰ç¼€å·¥å…·
* [del](https://www.npmjs.com/package/del)ï¼šç”¨äºåˆ é™¤æ–‡ä»¶å¤¹å’Œæ–‡ä»¶
* [eslint](https://www.npmjs.com/package/eslint)ï¼šJS ä»£ç æ£€æµ‹å·¥å…·
* [eslint-config-airbnb-base](https://www.npmjs.com/package/eslint-config-airbnb-base)ï¼šeslint çš„ airbnb ç¼–ç è§„åˆ™
* [eslint-config-prettier](https://www.npmjs.com/package/eslint-config-prettier)ï¼šå¤„ç† eslint ä¸­çš„æ ·å¼è§„èŒƒå’Œ prettier ä¸­æ ·å¼è§„èŒƒçš„å†²çª
* [eslint-plugin-import](https://www.npmjs.com/package/eslint-plugin-import)ï¼šéªŒè¯æ­£ç¡®çš„å¯¼å…¥çš„ eslint æ’ä»¶
* [eslint-plugin-jest](https://www.npmjs.com/package/eslint-plugin-jest)ï¼šè§£æ jest çš„ eslint æ’ä»¶
* [eslint-plugin-prettier](https://www.npmjs.com/package/eslint-plugin-prettier)ï¼šå°† prettier ä½œä¸º eslint è§„èŒƒæ¥ä½¿ç”¨
* [eslint-plugin-vue](https://www.npmjs.com/package/eslint-plugin-vue)ï¼šè§£æ Vue çš„ eslint æ’ä»¶
* [gulp](https://www.npmjs.com/package/gulp)ï¼šè‡ªåŠ¨åŒ–æ„å»ºå·¥å…·
* [gulp-autoprefixer](https://www.npmjs.com/package/gulp-autoprefixer)ï¼šè‡ªåŠ¨è·å–æµè§ˆå™¨å‚å•†å‰ç¼€ï¼Œå¦‚ -webkit-
* [gulp-cssmin](https://www.npmjs.com/package/gulp-cssmin)ï¼šcss å‹ç¼©
* [gulp-less](https://www.npmjs.com/package/gulp-less)ï¼šè§£æ CSS é¢„ç¼–è¯‘å™¨ LESS
* [gulp-postcss](https://www.npmjs.com/package/gulp-postcss)ï¼šè½¬æ¢å‰ç¼€å·¥å…·ï¼Œå’Œ gulp-autoprefixer æ­é…ä½¿ç”¨
* [jest](https://www.npmjs.com/package/jest)ï¼šå•å…ƒæµ‹è¯•
* [less](https://www.npmjs.com/package/less)ï¼šCSS é¢„ç¼–è¯‘å™¨
* [markdown-it-container](https://www.npmjs.com/package/markdown-it-container)ï¼šMarkdown è§£æå™¨
* [postcss-pxtorem](https://www.npmjs.com/package/postcss-pxtorem)ï¼š`å¯é€‰` è½¬æ¢ rem å•ä½
* [prettier](https://www.npmjs.com/package/prettier)ï¼šæ ¼å¼åŒ–è§„èŒƒ
* [rollup](https://www.npmjs.com/package/rollup)ï¼šè‡ªåŠ¨åŒ–æ‰“åŒ…å·¥å…·
* [rollup-plugin-terser](https://www.npmjs.com/package/rollup-plugin-terser)ï¼šrollup å‹ç¼©
* [rollup-plugin-typescript2](https://www.npmjs.com/package/rollup-plugin-typescript2)ï¼šrollup è§£æ TS
* [rollup-plugin-vue](https://www.npmjs.com/package/rollup-plugin-vue)ï¼šrollup è§£æ Vue
* [ts-jest](https://www.npmjs.com/package/ts-jest)ï¼šå•å…ƒæµ‹è¯•è§£æ TS
* [typescript](https://www.npmjs.com/package/typescript)ï¼šJS ç±»å‹çš„è¶…é›†ï¼Œå¼ºç±»å‹
* [vite](https://www.npmjs.com/package/vite)ï¼šè‡ªåŠ¨åŒ–æ„å»ºå·¥å…·
* [vite-plugin-vuedoc](https://www.npmjs.com/package/vite-plugin-vuedoc)ï¼šVite è§£æ Markdown
* [vue-jest](https://www.npmjs.com/package/vue-jest)ï¼šå•å…ƒæµ‹è¯•è§£æ Vue
* [vue-tsc](https://www.npmjs.com/package/vue-tsc)ï¼šVue æ–‡ä»¶ç”Ÿæˆ `.d.ts` ç±»å‹æ–‡ä»¶

</details>

### åˆ›å»ºé¡¹ç›®ç›®å½•

#### åˆ›å»ºæ¼”ç¤ºé¡¹ç›®ç›®å½•

* ç”Ÿæˆ `tsconfig.json`

```Basic
# å…¨å±€å®‰è£…
npm i -g typescript
# åˆå§‹åŒ–
tsc --init
```

* æ ¹ç›®å½•åˆ›å»º index.html

```HTML
<!DOCTYPE html>
<html lang="zh-cn">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" href="/favicon.ico" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>UIç»„ä»¶åº“</title>
  </head>
  <body>
    <div id="app"></div>
    <script type="module" src="/examples/main.ts"></script>
  </body>
</html>
```

* åˆ›å»º examples ç›®å½•ï¼Œæ­¤ç›®å½•ä¸ºæ¼”ç¤ºæ–‡æ¡£ä¸»ç›®å½•ï¼Œç›¸å½“äº src
  * åˆ›å»º `examples/assets`ï¼šèµ„æºç›®å½•
  * åˆ›å»º `examples/components`ï¼šæ¼”ç¤ºé¡¹ç›®çš„å…¬å…±ç»„ä»¶
  * åˆ›å»º `examples/router`ï¼šè·¯ç”±
  * åˆ›å»º `examples/App.vue`ï¼šé¡µé¢å…¥å£
  * åˆ›å»º `examples/main.ts`ï¼šä¸»å…¥å£

```TypeScript
import { createApp } from "vue";
import router from "./router";
import App from "./App.vue";

const app = createApp(App);
app.use(router);
app.mount("#app");
```

* é…ç½® Vite
  * åˆ›å»º `vite.config.ts`

```TypeScript
import { defineConfig } from "vite";
import vue from "@vitejs/plugin-vue";

export default defineConfig({
  plugins: [vue()]
});
```

* é…ç½® Eslint
  * åˆ›å»º `.eslintrc.js`

```JavaScript
// é…ç½®ä¿¡æ¯
const config = {
  env: {
    browser: true,
    es2021: true,
    node: true
  },
  extends: ["plugin:vue/essential", "airbnb-base", "plugin:prettier/recommended", "plugin:jest/recommended"],
  parserOptions: {
    ecmaVersion: 12,
    parser: "@typescript-eslint/parser",
    sourceType: "module"
  },
  plugins: ["vue", "@typescript-eslint"],
  settings: {},
  rules: {
  }
};
module.exports = config;
```

* TS è¯†åˆ« Vue æ–‡ä»¶
  * åˆ›å»º `typings/shims-vue.d.ts`

```TypeScript
// vue
declare module "*.vue" {
  import { App, defineComponent } from "vue";
  const component: ReturnType<typeof defineComponent> & {
    install(app: App): void;
  };
  export default component;
}
```

#### åˆ›å»ºå•å…ƒæµ‹è¯•ä¸»ç›®å½•

* é…ç½® Jest
  * åˆ›å»º `jest.config.js`

```JavaScript
// é…ç½®
const config = {
  moduleFileExtensions: ["vue", "json", "js", "ts"],
  preset: "ts-jest",
  testEnvironment: "jsdom",
  transform: {
    "^.+\\.vue$": "vue-jest", // vue æ–‡ä»¶ç”¨ vue-jest è½¬æ¢
    "^.+\\.ts$": "ts-jest" // ts æ–‡ä»¶ç”¨ ts-jest è½¬æ¢
  },
  testMatch: ["**/tests/unit/*.spec.ts"], // åŒ¹é… tests/unit ç›®å½•ä¸‹çš„ .ts æ–‡ä»¶
  verbose: true, // æ˜¾ç¤ºå†—ä½™ä»£ç ï¼Œtrueï¼šæ˜¾ç¤ºæµ‹è¯•ç”¨ä¾‹ï¼Œfalseï¼šæ˜¾ç¤º console.log
  bail: true, // ç»å†å‡ æ¬¡å¤±è´¥ååœæ­¢è¿è¡Œæµ‹è¯•
};
module.exports = config;
```

* åˆ›å»ºæµ‹è¯•ç”¨ä¾‹ `tests/unit/img.spec.ts`

```TypeScript
import { mount } from "@vue/test-utils";
import MeImg from "~/MeImg/index.vue"; // å¼•å…¥ä¸»è¦æµ‹è¯•çš„ç»„ä»¶

describe("MeImg", () => {
  const src = "http://dummyimage.com/100x100/0079cb/fff"; // å›¾ç‰‡åœ°å€
  // æµ‹è¯•ä¼ å‚ src
  test("props src", () => {
    // å‘ç»„ä»¶é‡Œä¼ å‚ï¼Œè·å–ç»„ä»¶å®ä¾‹
    const wrapper = mount(MeImg, {
      props: { src }
    });
    const viewer = wrapper.find(".me-img"); // è·å– DOM
    expect(viewer.exists()).toBeTruthy(); // æ˜¯å¦å­˜åœ¨
    const imgEl = viewer.find("img");
    expect(viewer.exists()).toBeTruthy();
    expect(imgEl.attributes("src")).toBe(src); // ä¼ å…¥çš„ src åœ°å€æ˜¯å¦åœ¨ç»„ä»¶é‡Œæ­£ç¡®
  });
});

```

#### åˆ›å»ºç»„ä»¶åº“ä¸»ç›®å½•

* åˆ›å»º `packages/index.ts`

```TypeScript
import type { App } from "vue";

/* åŸºç¡€ç»„ä»¶ start */
import MeImg from "./MeImg"; // å›¾ç‰‡
/* åŸºç¡€ç»„ä»¶ end */

// æ‰€æœ‰ç»„ä»¶
const components: any[] = [MeImg];

/**
 * ç»„ä»¶æ³¨å†Œ
 * @param {App} app Vue å¯¹è±¡
 * @returns {Void}
 */
const install = (app: App) => {
  // æ³¨å†Œç»„ä»¶
  components.forEach(component => app.component(component.name, component));
};
export { MeImg };
// å…¨éƒ¨å¯¼å‡º
export default {
  install,
  ...components
};
```

### å¼€å‘ç»„ä»¶

* åˆ›å»ºç»„ä»¶æ–‡ä»¶ `packages/MeImg/index.vue`

<details>
<summary>ğŸ‘€ æŸ¥çœ‹ä»£ç </summary>

```Vue
<template>
  <!-- å›¾ç‰‡ -->
  <div class="me-img" @click="onClick">
    <img :src="src" width="40px" height="40px" :alt="alt" v-if="!fill" :style="`width:${width};height:${height};border-radius:${radius};`" @load="onLoad" @error="onError" />
    <span :style="`width:${width};height:${height};border-radius:${radius};background:url(${src}) no-repeat center;background-size:${fill};`" v-else></span>
  </div>
</template>
<script lang="ts">
import { defineComponent } from "vue";

export default defineComponent({
  name: "MeImg",
  props: {
    // å›¾ç‰‡åœ°å€
    src: {
      type: String,
      required: true
    },
    // å®½åº¦
    width: {
      type: String,
      default: ""
    },
    // é«˜åº¦
    height: {
      type: String,
      default: ""
    },
    // å¡«å……æ–¹å¼
    fill: {
      type: String,
      default: ""
    },
    // å€’è§’
    radius: {
      type: String,
      default: "0"
    },
    // é”™è¯¯æ˜¾ç¤ºalt
    alt: {
      type: String,
      default: ""
    }
  },
  setup(props, { emit }) {
    // ç‚¹å‡»æŒ‰é’®
    const onClick = (e: MouseEvent) => {
      emit("on-click", e);
    };
    // åŠ è½½å®Œæˆ
    const onLoad = (e: Event) => {
      emit("on-load", e);
    };
    // åŠ è½½å¤±è´¥
    const onError = (e: Event) => {
      emit("on-error", e);
    };
    return { onClick, onLoad, onError };
  }
});
</script>
```

</details>

* åˆ›å»ºå¯¼å‡ºæ–‡ä»¶ `packages/MeImg/index.ts`

```TypeScript
import type { App } from "vue";
import MeImg from "./index.vue";

type SFCWithInstall<T> = T & { install(app: App): void }; // vue å®‰è£…

// å®‰è£…
MeImg.install = (app: App) => {
  app.component(MeImg.name, MeImg);
};
const InMeImg: SFCWithInstall<typeof MeImg> = MeImg; // å¢åŠ ç±»å‹
export default InMeImg;

```

* æ ·å¼å¼€å‘ `theme-default/MeImg.less`

```Less
/**
  * @file å›¾ç‰‡
*/
.me-img {
  .inline-block;

  // ç›¸åŒçš„æ ·å¼
  .same-style {
    display: block;
    width: @img-size;
    overflow: hidden;
  }

  img {
    .same-style;
    height: auto;
  }

  span {
    .same-style;
    height: 40px;
  }
}
```

::: tip å®Œæˆ
å¼€å‘å®Œæˆ
:::

### æ‰“åŒ…æ¼”ç¤ºé¡¹ç›®

* `package.json` è®¾ç½®å‘½ä»¤

```JSON
"scripts": {
  "start": "npm run dev",
  "dev": "vite -m development",
  "build": "npm run build:theme && npm run build:package && npm run build:package:dts",
  "build:docs": "vite build",
  "build:theme": "gulp build -f build/gulpfile.prod.js",
  "build:package": "rollup -c build/rollup.config.js",
  "build:package:dts": "rollup -c build/rollup.config.dts.js",
  "test:unit": "jest -c=jest.config.js --detectOpenHandles"
}
```

#### é…ç½®ç»„ä»¶åº“æ‰“åŒ…

##### ç»„ä»¶ JS æ‰“åŒ…

* åˆ›å»º Rollup é…ç½®æ–‡ä»¶ `build/rollup.config.js` å’Œ `build/rollup.config.dts.js`

<details>
<summary>ğŸ‘€ rollup.config.js</summary>

```JavaScript
import nodeResolve from "@rollup/plugin-node-resolve"; // å‘Šè¯‰ Rollup å¦‚ä½•æŸ¥æ‰¾å¤–éƒ¨æ¨¡å—
import typescript from "rollup-plugin-typescript2";
import vue from "rollup-plugin-vue"; // å¤„ç†vueæ–‡ä»¶
import { readdirSync } from "fs"; // å†™æ–‡ä»¶
import { resolve } from "path";
const input = resolve(__dirname, "../packages"); // å…¥å£æ–‡ä»¶
const output = resolve(__dirname, "../lib"); // è¾“å‡ºæ–‡ä»¶
const config = readdirSync(input)
  .filter(name => !["theme-default", "index.ts", "types.ts"].includes(name))
  .map(name => ({
    input: `${input}/${name}/index.ts`,
    external: ["vue"],
    plugins: [
      nodeResolve(),
      vue(),
      typescript({
        tsconfigOverride: {
          compilerOptions: {
            declaration: false
          },
          exclude: ["node_modules", "examples", "tests"]
        },
        abortOnError: false,
        clean: true
      })
    ],
    output: {
      name: "index",
      file: `${output}/${name}/index.js`,
      format: "es"
    }
  }));
config.push({
  input: `${input}/index.ts`,
  external: ["vue"],
  plugins: [
    nodeResolve(),
    vue(),
    typescript({
      tsconfigOverride: {
        compilerOptions: {
          declaration: false
        },
        exclude: ["node_modules", "examples", "tests"]
      },
      abortOnError: false,
      clean: true
    })
  ],
  output: {
    name: "index",
    file: `${output}/index.js`,
    format: "es"
  }
});
export default config;
```

</details>

<details>
<summary>ğŸ‘€ rollup.config.dts.js</summary>

```JavaScript
import nodeResolve from "@rollup/plugin-node-resolve"; // å‘Šè¯‰ Rollup å¦‚ä½•æŸ¥æ‰¾å¤–éƒ¨æ¨¡å—
import { terser } from "rollup-plugin-terser";
import typescript from "rollup-plugin-typescript2";
import vue from "rollup-plugin-vue"; // å¤„ç†vueæ–‡ä»¶
import { resolve } from "path";
const input = resolve(__dirname, "../packages"); // å…¥å£æ–‡ä»¶
const output = resolve(__dirname, "../lib"); // è¾“å‡ºæ–‡ä»¶
const config = [
  {
    input: `${input}/index.ts`,
    output: {
      format: "es",
      file: `${output}/index.esm.js`
    },
    plugins: [
      terser(),
      nodeResolve(),
      vue({
        target: "browser",
        css: false,
        exposeFilename: false
      }),
      typescript({
        useTsconfigDeclarationDir: false,
        tsconfigOverride: {
          include: ["packages/**/*"],
          exclude: ["node_modules", "examples", "tests"]
        },
        abortOnError: false
      })
    ],
    external: ["vue"]
  }
];
export default config;
```

</details>

##### ç»„ä»¶æ ·å¼æ‰“åŒ…

* åˆ›å»º Gulp é…ç½®æ–‡ä»¶ `build/gulpfile.base.js`

<details>
<summary>ğŸ‘€ rollup.config.dts.js</summary>

```JavaScript
const { src, dest, series, parallel } = require("gulp");
const less = require("gulp-less");
const autoprefixer = require("gulp-autoprefixer");
const cssmin = require("gulp-cssmin");
const del = require("del");
// æ‰“åŒ…é…ç½®
const config = {
  input: "../packages/theme-default/",
  output: "../lib/theme-default"
};
// å¯¼å‡ºé…ç½®é¡¹
exports.config = config;
// å¤åˆ¶å­—ä½“
exports.copyfont = () => src([`${config.input}fonts/*`, `!${config.input}fonts/*.css`]).pipe(dest(`${config.output}/fonts`));
// å‹ç¼©font é‡Œçš„ CSS
exports.minifontCss = () =>
  src(`${config.input}fonts/*.css`)
    .pipe(cssmin())
    .pipe(dest(`${config.output}/fonts`));
// åˆ é™¤ä¹‹å‰cssæ‰“åŒ…æ–‡ä»¶
exports.clean = done => {
  del(
    ["*.css", "fonts"].map(name => `${config.output}/${name}`),
    { force: true }
  );
  done();
};

// ç¼–è¯‘ LESS
const compile = () =>
  src([`${input}*.less`, ...["base", "variable"].map(name => `!${input}${name}.less`)])
    .pipe(less())
    .pipe(
      autoprefixer({
        overrideBrowserslist: ["last 2 versions"]
      })
    )
    .pipe(cssmin())
    .pipe(dest(output));
exports.build = series(clean, parallel(compile, copyfont, minifontCss));
```

</details>

### ä¸Šä¼  npm å®˜ç½‘

* ç™»å½•

```Bacic
npm login
```

* å‘å¸ƒ

```Bacic
npm publish
```

* æœ€åå†é™„ä¸Š [Githubåœ°å€](https://github.com/biaov/MINE-H5-UI) å’Œ [æ¼”ç¤ºåœ°å€](https://mineh5ui.biaov.cn/v2/) ä»¥ä¾›å‚è€ƒã€‚
